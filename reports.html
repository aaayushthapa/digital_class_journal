{% extends "base.html" %}

{% block title %}Reports{% endblock %}

{% block header %}Reports{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h3>Generate Reports</h3>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <div class="report-card">
                    <div class="report-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="report-content">
                        <h4>Project Report</h4>
                        <p>Generate a detailed report of your project activities, including all journal entries and feedback.</p>
                        <button class="btn btn-primary" id="generateProjectReport">Generate Report</button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="report-card">
                    <div class="report-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="report-content">
                        <h4>Assignment Report</h4>
                        <p>Create a report of all your assignments, including submission status and grades.</p>
                        <button class="btn btn-primary" id="generateAssignmentReport">Generate Report</button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="report-card">
                    <div class="report-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="report-content">
                        <h4>Progress Report</h4>
                        <p>Get a comprehensive overview of your learning progress with visual charts.</p>
                        <button class="btn btn-primary" id="generateProgressReport">Generate Report</button>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="report-card">
                    <div class="report-icon">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <div class="report-content">
                        <h4>Weekly Summary</h4>
                        <p>Generate a weekly summary of your activities and achievements.</p>
                        <button class="btn btn-primary" id="generateWeeklyReport">Generate Report</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h3>Generated Reports</h3>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>Report Name</th>
                        <th>Type</th>
                        <th>Date Generated</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Science Project Report</td>
                        <td>Project Report</td>
                        <td>May 15, 2023</td>
                        <td>
                            <button class="btn btn-sm btn-outline"><i class="fas fa-eye"></i> View</button>
                            <button class="btn btn-sm btn-outline"><i class="fas fa-download"></i> Download</button>
                            <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                        </td>
                    </tr>
                    <tr>
                        <td>Weekly Summary - Week 19</td>
                        <td>Weekly Summary</td>
                        <td>May 12, 2023</td>
                        <td>
                            <button class="btn btn-sm btn-outline"><i class="fas fa-eye"></i> View</button>
                            <button class="btn btn-sm btn-outline"><i class="fas fa-download"></i> Download</button>
                            <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                        </td>
                    </tr>
                    <tr>
                        <td>Assignment Progress</td>
                        <td>Assignment Report</td>
                        <td>May 5, 2023</td>
                        <td>
                            <button class="btn btn-sm btn-outline"><i class="fas fa-eye"></i> View</button>
                            <button class="btn btn-sm btn-outline"><i class="fas fa-download"></i> Download</button>
                            <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Report Options Modal -->
<div class="modal" id="reportOptionsModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Report Options</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="reportOptionsForm">
                    <div class="form-group">
                        <label for="reportTitle">Report Title</label>
                        <input type="text" class="form-control" id="reportTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="reportDateRange">Date Range</label>
                        <select class="form-control" id="reportDateRange">
                            <option value="last_week">Last Week</option>
                            <option value="last_month">Last Month</option>
                            <option value="last_quarter">Last Quarter</option>
                            <option value="custom">Custom Range</option>
                        </select>
                    </div>
                    <div class="form-group" id="customDateRange" style="display: none;">
                        <label>Custom Date Range</label>
                        <div class="row">
                            <div class="col-md-6">
                                <input type="date" class="form-control" id="startDate">
                            </div>
                            <div class="col-md-6">
                                <input type="date" class="form-control" id="endDate">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="reportFormat">Format</label>
                        <select class="form-control" id="reportFormat">
                            <option value="pdf">PDF</option>
                            <option value="word">Word Document</option>
                            <option value="html">Web Page</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="reportInclude">Include</label>
                        <div class="checkbox-group">
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="includeJournal" checked>
                                <label class="form-check-label" for="includeJournal">Journal Entries</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="includeFeedback" checked>
                                <label class="form-check-label" for="includeFeedback">Feedback</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="includeAssignments" checked>
                                <label class="form-check-label" for="includeAssignments">Assignments</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="includeMedia">
                                <label class="form-check-label" for="includeMedia">Media Files</label>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="generateReportBtn">Generate</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.report-card {
    background-color: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    display: flex;
    margin-bottom: 20px;
    height: 100%;
}

.report-icon {
    width: 60px;
    height: 60px;
    background-color: #f1f3f5;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary-color);
    font-size: 24px;
    margin-right: 20px;
    flex-shrink: 0;
}

.report-content {
    flex: 1;
}

.report-content h4 {
    font-size: 18px;
    margin-bottom: 10px;
    color: var(--primary-color);
}

.report-content p {
    margin-bottom: 15px;
    color: #6c757d;
}

.checkbox-group {
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 6px;
}

.form-check {
    margin-bottom: 10px;
}

.form-check:last-child {
    margin-bottom: 0;
}

.form-check-input {
    margin-right: 10px;
}

.form-check-label {
    font-size: 14px;
}

@media (max-width: 768px) {
    .report-card {
        flex-direction: column;
    }
    
    .report-icon {
        margin-right: 0;
        margin-bottom: 15px;
    }
    
    .col-md-6 {
        flex: 0 0 100%;
        max-width: 100%;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Report generation buttons
    const generateButtons = [
        'generateProjectReport',
        'generateAssignmentReport',
        'generateProgressReport',
        'generateWeeklyReport'
    ];
    
    generateButtons.forEach(buttonId => {
        const button = document.getElementById(buttonId);
        if (button) {
            button.addEventListener('click', function() {
                const modal = document.getElementById('reportOptionsModal');
                if (modal) {
                    // Set report title based on button clicked
                    const reportTitle = document.getElementById('reportTitle');
                    if (reportTitle) {
                        const reportName = this.closest('.report-content').querySelector('h4').textContent;
                        reportTitle.value = reportName + ' - ' + new Date().toLocaleDateString();
                    }
                    
                    modal.style.display = 'block';
                }
            });
        }
    });
    
    // Date range selection
    const dateRangeSelect = document.getElementById('reportDateRange');
    if (dateRangeSelect) {
        dateRangeSelect.addEventListener('change', function() {
            const customDateRange = document.getElementById('customDateRange');
            if (this.value === 'custom') {
                customDateRange.style.display = 'block';
            } else {
                customDateRange.style.display = 'none';
            }
        });
    }
    
    // Generate report button in modal
    const generateReportBtn = document.getElementById('generateReportBtn');
    if (generateReportBtn) {
        generateReportBtn.addEventListener('click', function() {
            // Here you would typically generate the report via AJAX
            alert('Report generated successfully!');
            const modal = document.getElementById('reportOptionsModal');
            if (modal) {
                modal.style.display = 'none';
            }
        });
    }
    
    // Modal close functionality
    const modal = document.getElementById('reportOptionsModal');
    if (modal) {
        const closeModalBtn = modal.querySelector('.close');
        if (closeModalBtn) {
            closeModalBtn.addEventListener('click', function() {
                modal.style.display = 'none';
            });
        }
        
        // Close modal when clicking outside
        window.addEventListener('click', function(event) {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });
    }
});
</script>
{% endblock %}